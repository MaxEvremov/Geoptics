<style>
	.just-padding {
		padding: 15px;
	}

	.list-group.list-group-root {
		padding: 0;
		overflow: hidden;
	}

	.list-group.list-group-root .list-group {
		margin-bottom: 0;
	}

	.list-group.list-group-root .list-group-item {
		border-radius: 0;
		border-width: 1px 0 0 0;
	}

	.list-group.list-group-root > .list-group-item:first-child {
		border-top-width: 0;
	}

	.list-group.list-group-root > .list-group > .list-group-item {
		padding-left: 30px;
	}

	.list-group.list-group-root > .list-group > .list-group > .list-group-item {
		padding-left: 45px;
	}

	.list-group-item .glyphicon {
		margin-right: 5px;
	}

	.dygraph-legend {
		padding: 10px;
		border: 1px solid #999;
		border-radius: 3px;
	}

	.dygraph-legend >* {
		display: block;
	}

	.dygraphDefaultAnnotation {
		line-height: 14px;
		border: 0;
		box-shadow: 1px 1px 2px 1px rgba(0, 0, 0, 0.37);
        color: white !important;
	}

	.plotpoints {}
</style>
<section class="content-header">
	<h1>
        Скважина №4
    </h1>
</section>

<section class="content">
	<div class="row">
		<div class="col-md-6">
			<div class="box box-info">
				<div class="box-header">
					<h3 class="box-title">Давление</h3>
				</div>

				<div class="box-body">
					<div data-bind="dygraph: { options: avg_options, done: avg_done }"></div>

                    <div>
                        <label class="control-label">zoom_y</label>
                        <input style="width: 100px;" data-bind="value: min_zoom_y">
                        <input style="width: 100px;" data-bind="value: max_zoom_y">
                    </div>

                    <div>
                        <label class="control-label">zoom_x</label>
                        <input style="width: 200px;" data-bind="
                            textInput: min_zoom_x,
                            jmask: {
                                mask: '00/00/0000 00:00:00',
                                options: {
                                    placeholder: '__/__/____ __:__:__'
                                }
                            }
                        ">
                        <input style="width: 200px;" data-bind="
                            textInput: max_zoom_x,
                            jmask: {
                                mask: '00/00/0000 00:00:00',
                                options: {
                                    placeholder: '__/__/____ __:__:__'
                                }
                            }
                        ">
                    </div>
				</div>

                <div class="box-footer">
                    <div class="col-sm-2">
                        <a class="btn btn-sm btn-danger" data-bind="click: saveFavorite">
                            <i class="fa fa-star"></i> <span>В Избранное</span>
                        </a>
                    </div>

                    <div class="col-sm-3">
                        <a class="btn btn-sm btn-danger" data-bind="click: getDeviations">
                            <i class="fa fa-star"></i> <span>Рассчитать отклонения</span>
                        </a>
                    </div>

                    <div class="col-sm-1">
                        <input class="form-control" placeholder="Мин. отклонение" data-bind="textInput: min_deviation"></input>
                    </div>
                </div>
			</div>
		</div>

        <div class="col-md-3">
            <div id="dygraph_box" class="box box-danger">
                <div class="box-header">
                    <h3 class="box-title">Графики</h3>
                </div>

                <div id="main_dygraph" class="box-body" style="height: 100%;">
                    <div id="dygraph_container">
                    </div>
                </div>
            </div>
        </div>

		<div class="col-md-3">
			<div class="box box-info" data-bind="visible: !is_editing_reference_point()">
				<div class="box-header">
					<h3 class="box-title">Точки</h3>
				</div>

				<div class="box-body">
					<!-- ko ifnot: annotations().length === 0 -->
					<table class="table plotpoints" style="font-size: 0.8em;">
						<tbody data-bind="foreach: annotations">
							<tr>
								<td data-bind="
                                    text: $index() + 1,
                                    style: {
                                        color: $parent.plot_colors[$index()]
                                    }
                                "></td>
								<td>
									<span data-bind="text: $parent.moment(x).format('DD.MM.YYYY HH:mm')"></span>
								</td>
								<td class="btn-hoverable" data-bind="click: $parent.removePoint">
									<i class="fa fa-times"></i>
								</td>
                                <td class="btn-hoverable" data-bind="click: $parent.downloadLAS">
									<i class="fa fa-download"></i> Скачать как LAS
								</td>
							</tr>
						</tbody>
					</table>
					<!-- /ko -->

					<!-- ko if: annotations().length === 0 -->
					<p style="font-size: 0.8em; color: #999;">Выберите хотя бы одну точку на графике давления</p>
					<!-- /ko -->
				</div>
			</div>

            <div class="box box-danger" data-bind="visible: is_editing_reference_point">
                <div class="box-header">
                    <h3 class="box-title">Эталонная точка</h3>
                </div>

                <div class="box-body">
                    <ul class="list-unstyled">
                        <li>Дата: <span data-bind="text: reference_date() || '-'"></span></li>
                        <li>Глубина: <span data-bind="text: reference_length() || '-'"></span></li>
                        <li>Температура: <span data-bind="text: reference_temp() || '-'"></span></li>
                    </ul>
                </div>

                <div class="box-footer">
                    <a class="btn btn-sm btn-danger" data-bind="click: saveReferencePoint">
                        <span>Сохранить</span>
                    </a>
                </div>
            </div>
		</div>
	</div>
</section>
