<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Geoptics Admin</title>
	<meta name="description" content="Geoptics">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/AdminLTE.min.css" rel="stylesheet">
    <link href="/css/skin-black.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">

    <script src="./lib/jquery.min.js"></script>
    <script src="./lib/jquery.mask.min.js"></script>
    <script src="./lib/knockout-latest.debug.js"></script>
    <script src="./lib/knockout.mapping.js"></script>

    <script src="./lib/pagerjs/history.js"></script>
    <script src="./lib/pagerjs/history.adapter.native.js"></script>
    <script src="./lib/pagerjs/pager.js"></script>

    <script src="./lib/randomColor.js"></script>
    <script src="./lib/moment-with-locales.min.js"></script>
    <script src="./lib/lodash.min.js"></script>
    <script src="./lib/async.min.js"></script>
    <script src="./lib/FileAPI.min.js"></script>

    <script src="./js/index.js"></script>

    <script src="./js/helpers.js"></script>
    <script src="./js/CRUD.js"></script>
    <script src="./js/ko-binding-handlers.js"></script>

    <script src="./js/models/Well.js"></script>
    <script src="./js/models/User.js"></script>
    <script src="./js/models/Texture.js"></script>
    <script src="./js/models/Sensor.js"></script>

    <script src="./js/state.js"></script>
    <script src="./js/login.js"></script>
    <script src="./js/users.js"></script>
    <script src="./js/wells.js"></script>
    <script src="./js/textures.js"></script>
    <script src="./js/sensors.js"></script>

    <script type="text/javascript">
        document.write("<base href='" + document.location.origin + "/admin/' />")
    </script>
</head>

<body class="skin-black">
    <div data-bind="page: {
        id: 'login',
        with: login,
        sourceOnShow: 'pages/login.html'
    }"></div>

    <!-- ko ifnot: state.current_page() === 'login' -->
    <div class="wrapper">
        <header class="main-header">
            <span class="logo">
                Geoptics
            </span>
            <nav class="navbar navbar-static-top" role="navigation">
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <li>
                            <a>Добро пожаловать, Администратор</a>
                        </li>
                        <li data-bind="click: state.logOut">
                            <a>
                                <i class="fa fa-sign-out"></i> <span>Выход</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <aside class="main-sidebar">
            <section class="sidebar">
                <ul class="sidebar-menu">
                    <li data-bind="css: { active: state.current_page() === 'users' }">
                        <a data-bind="'page-href': '/users'">
                            <i class="fa fa-user"></i> <span>Пользователи</span>
                        </a>
                    </li>
                    <li data-bind="css: { active: state.current_page() === 'wells' }">
                        <a data-bind="'page-href': '/wells'">
                            <i class="fa fa-cog"></i> <span>Скважины</span>
                        </a>
                    </li>
                    <li data-bind="css: { active: state.current_page() === 'textures' }">
                        <a data-bind="'page-href': '/textures'">
                            <i class="fa fa-cog"></i> <span>Виды констр. разметки</span>
                        </a>
                    </li>
                    <li data-bind="css: { active: state.current_page() === 'sensors' }">
                        <a data-bind="'page-href': '/sensors'">
                            <i class="fa fa-cog"></i> <span>Датчики</span>
                        </a>
                    </li>
                </ul>
            </section>
        </aside>

        <div class="content-wrapper" style="min-height: 780px;">
            <div data-bind="page: {
                id: 'users',
                role: 'start',
                sourceOnShow: 'pages/users.html',
                with: users,
                beforeShow: users.onShow,
                guard: state.loggedInGuard
            }"></div>

            <div data-bind="page: { id: 'user' }">
                <div data-bind="page: {
                    id: '?',
                    nameParam: users.item_id,
                    beforeShow: users.onItemShow,
                    sourceOnShow: 'pages/user.html',
                    with: users,
                    guard: state.loggedInGuard
                }"></div>
            </div>

            <div data-bind="page: {
                id: 'wells',
                sourceOnShow: 'pages/wells.html',
                with: wells,
                beforeShow: wells.onShow,
                guard: state.loggedInGuard
            }"></div>

            <div data-bind="page: {
                id: 'well'
            }">
                <div data-bind="page: {
                    id: '?',
                    nameParam: wells.item_id,
                    beforeShow: wells.onItemShow,
                    sourceOnShow: 'pages/well.html',
                    with: wells,
                    guard: state.loggedInGuard
                }">
                </div>
            </div>

            <div data-bind="page: {
                id: 'well_permissions'
            }">
                <div data-bind="page: {
                    id: '?',
                    nameParam: wells.item_id,
                    beforeShow: wells.onWellPermissionsShow,
                    sourceOnShow: 'pages/well_permissions.html',
                    with: wells,
                    guard: state.loggedInGuard
                }">
                </div>
            </div>

            <div data-bind="page: {
                id: 'textures',
                sourceOnShow: 'pages/textures.html',
                with: textures,
                beforeShow: textures.onShow,
                guard: state.loggedInGuard
            }"></div>

            <div data-bind="page: {
                id: 'texture'
            }">
                <div data-bind="page: {
                    id: '?',
                    nameParam: textures.item_id,
                    beforeShow: textures.onItemShow,
                    sourceOnShow: 'pages/texture.html',
                    with: textures,
                    guard: state.loggedInGuard
                }">
                </div>
            </div>

            <div data-bind="page: {
                id: 'sensors',
                sourceOnShow: 'pages/sensors.html',
                with: sensors,
                beforeShow: sensors.onShow,
                guard: state.loggedInGuard
            }"></div>

            <div data-bind="page: {
                id: 'sensor'
            }">
                <div data-bind="page: {
                    id: '?',
                    nameParam: sensors.item_id,
                    beforeShow: sensors.onItemShow,
                    sourceOnShow: 'pages/sensor.html',
                    with: sensors,
                    guard: state.loggedInGuard
                }">
                </div>
            </div>
        </div>
    </div>
    <!-- /ko -->
</body>
</html>
