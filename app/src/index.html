<!doctype html>

<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Geoptics</title>
	<meta name="description" content="Geoptics">

	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/AdminLTE.min.css" rel="stylesheet">
	<link href="css/_all-skins.min.css" rel="stylesheet">
	<link href="css/font-awesome.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

	<script src="lib/jquery.min.js"></script>
	<script src="lib/jquery.mask.min.js"></script>
	<script src="lib/knockout-latest.debug.js"></script>
	<script src="lib/knockout.mapping.js"></script>

    <script src="lib/pagerjs/history.js"></script>
    <script src="lib/pagerjs/history.adapter.native.js"></script>
    <script src="lib/pagerjs/pager.js"></script>

	<script src="lib/randomColor.js"></script>
	<script src="lib/moment-with-locales.min.js"></script>
	<script src="lib/lodash.min.js"></script>
	<script src="lib/dygraph-combined.js"></script>
	<script src="lib/async.min.js"></script>

    <script src="js/index.js"></script>

	<script src="js/helpers.js"></script>
	<script src="js/ko-binding-handlers.js"></script>

    <script src="js/Well.js"></script>
    <script src="js/Plot.js"></script>

    <script src="js/plot-main.js"></script>

    <script src="js/state.js"></script>
	<script src="js/login.js"></script>
	<script src="js/plots.js"></script>
	<script src="js/favorites.js"></script>

	<script type="text/javascript">
		document.write("<base href='" + document.location.origin + "/' />")
	</script>
</head>


<body class="skin-red sidebar-mini fixed" style="background: #E4E3DB;">
	<div data-bind="page: {
        id: 'login',
        with: login,
        source: 'pages/login.html'
    }"></div>

	<div data-bind="visible: state.current_page() !== 'login'">
		<!-- ko if: state.user -->
		<header class="main-header">
			<span class="logo">
                Geoptics
            </span>
			<nav class="navbar navbar-static-top" role="navigation">
				<div class="navbar-custom-menu">
					<ul class="nav navbar-nav">
						<li>
							<a>Добро пожаловать, <span data-bind="text: state.user().name"></span></a>
						</li>
						<li>
							<a data-bind="click: login.logOut">
								<i class="fa fa-sign-out"></i> <span>Выход</span>
							</a>
						</li>
					</ul>
				</div>
			</nav>
		</header>
		<!-- /ko -->

		<aside class="main-sidebar">
			<section class="sidebar">
				<ul class="sidebar-menu">
					<li class="header">Скважины</li>
					<li data-bind="css: { active: state.current_page() === 'plots' }">
						<a data-bind="'page-href': '/plots'">
							<i class="fa fa-industry"></i> <span>Скважина №4</span> <i class="fa fa-cog pull-right btn-hoverable" data-bind="click: plots.toggleSettings"></i>
						</a>

                        <ul class="treeview-menu" data-bind="visible: plots.are_settings_enabled">
                            <li>
                                <a data-bind="click: plots.editReferencePoint"><i class="fa fa-compress"></i> Выбор эталонной точки</a>
                            </li>
                            <li>
                                <a data-bind="click: plots.setMinLength"><i class="fa fa-step-forward"></i> Выбор нуля глубины</a>
                            </li>
                            <li>
                                <a data-bind="click: plots.addTimelineEvent"><i class="fa fa-circle-o"></i> Добавить событие</a>
                            </li>
                            <li>
                                <a data-bind="click: plots.addLengthAnnotation"><i class="fa fa-circle-o"></i> Добавить констр. элемент</a>
                            </li>
                        </ul>
					</li>
					<li class="header">Отчёты</li>
					<li data-bind="css: { active: state.current_page() === 'favorites' }">
						<a data-bind="'page-href': '/favorites'">
							<i class="fa fa-star"></i> <span>Избранное</span>
						</a>
					</li>
				</ul>
			</section>
		</aside>

		<div class="content-wrapper" style="background:inherit">
			<div data-bind="page: {
                id: 'plots',
                with: plots,
                afterShow: plots.afterShow,
                source: 'pages/plots.html',
                guard: state.loggedInGuard
            }"></div>

			<div data-bind="page: {
                id: 'favorites',
                with: favorites,
                beforeShow: favorites.onShow,
                source: 'pages/favorites.html',
                guard: state.loggedInGuard
            }"></div>
		</div>
	</div>
</body>

</html>
